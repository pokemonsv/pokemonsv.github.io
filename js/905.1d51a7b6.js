"use strict";(globalThis["webpackChunkpkm_sv_raidbattle"]=globalThis["webpackChunkpkm_sv_raidbattle"]||[]).push([[905],{9905:(e,t,l)=>{l.r(t),l.d(t,{default:()=>se});var a=l(9835),o=l(6970);const s={class:"q-pa-lg col"},n={class:"row justify-evenly"},i={class:"q-gutter-md col-xs-12 col-sm-6 col-md-4"},m={class:"q-gutter-md col-xs-12 col-sm-6 col-md-4"},r={class:"q-gutter-md q-pt-md col-xs-6 col-sm-4 col-md-2"},d={class:"q-gutter-md q-pt-md col-xs-6 col-sm-4 col-md-2"},u={class:"q-pa-md col-12",style:{"max-width":"1600px"}},c={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},p={style:{fontSize:"36px"}},f=(0,a._)("br",null,null,-1),w={style:{fontSize:"18px"}},b=(0,a._)("br",null,null,-1),y={style:{fontSize:"18px"}},v=(0,a._)("br",null,null,-1),g={style:{fontSize:"18px"}},h={style:{fontSize:"18px"}},_={class:"row justify-evenly"},k={class:"q-gutter-md col-xs-12 col-sm-6 col-md-3"},x={class:"q-gutter-md col-xs-12 col-sm-6 col-md-3"},T={class:"q-gutter-md col-xs-12 col-sm-6 col-md-3"},q={class:"q-gutter-md col-xs-12 col-sm-6 col-md-3"},V={class:"q-gutter-md col-xs-12 col-sm-12 col-md-9"},W={class:"q-gutter-md q-pt-md col-xs-12 col-sm-12 col-md-3"};function Z(e,t,l,Z,S,C){const P=(0,a.up)("q-tab"),Q=(0,a.up)("q-tabs"),B=(0,a.up)("q-separator"),N=(0,a.up)("q-select"),z=(0,a.up)("q-btn"),H=(0,a.up)("q-icon"),R=(0,a.up)("q-input"),j=(0,a.up)("q-card-section"),U=(0,a.up)("q-card"),F=(0,a.up)("q-table"),I=(0,a.up)("q-tab-panel"),K=(0,a.up)("q-item-section"),O=(0,a.up)("q-item"),L=(0,a.up)("q-tab-panels"),D=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(D,{class:"row justify-evenly"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{name:"join",label:"加入"}),(0,a.Wm)(P,{name:"create",label:"開場"})])),_:1},8,["modelValue"]),(0,a.Wm)(B),(0,a.Wm)(L,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=t=>e.tab=t),animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{name:"join"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",i,[(0,a.Wm)(N,{modelValue:e.searchType,"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchType=t),options:e.types,label:"太晶屬性"},null,8,["modelValue","options"])]),(0,a._)("div",m,[(0,a.Wm)(N,{modelValue:e.searchStar,"onUpdate:modelValue":t[2]||(t[2]=t=>e.searchStar=t),options:e.stars,label:"星數"},null,8,["modelValue","options"])]),(0,a._)("div",r,[(0,a.Wm)(z,{color:"primary",label:"篩選+更新",class:"float-left",onClick:e.search},null,8,["onClick"])]),(0,a._)("div",d,[(0,a.Wm)(z,{color:"orange",label:"重設",class:"float-right",onClick:e.reset},null,8,["onClick"])]),(0,a._)("div",u,[(0,a.Wm)(F,{title:"太晶團體戰",rows:e.pkm.raidBattles,columns:e.raidBattleColums,"rows-per-page-options":[6,9,12,18],grid:"",filter:e.filter,"row-key":"name"},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(R,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[3]||(t[3]=t=>e.filter=t),placeholder:"搜尋"},{append:(0,a.w5)((()=>[(0,a.Wm)(H,{name:"search"})])),_:1},8,["modelValue"])])),item:(0,a.w5)((e=>[(0,a._)("div",c,[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,{class:"text-center"},{default:(0,a.w5)((()=>[(0,a._)("strong",p,(0,o.zw)(e.row.PartitionKey),1),f,(0,a._)("strong",w,"星數: "+(0,o.zw)(e.row.Stars),1),b,(0,a._)("strong",y,"屬性: "+(0,o.zw)(e.row.Type),1),v,(0,a._)("strong",g,"備註: "+(0,o.zw)(e.row.Comment),1)])),_:2},1024),(0,a.Wm)(B),(0,a.Wm)(j,{class:"flex flex-center",style:{fontSize:"48px"}},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,o.zw)(e.row.Password),1)])),_:2},1024),(0,a.Wm)(B),(0,a.Wm)(j,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a._)("strong",h,(0,o.zw)(e.row.Timestamp),1)])),_:2},1024)])),_:2},1024)])])),_:1},8,["rows","columns","filter"])])])])),_:1}),(0,a.Wm)(I,{name:"create"},{default:(0,a.w5)((()=>[(0,a._)("div",_,[(0,a._)("div",k,[(0,a.Wm)(N,{modelValue:e.pkmName,"onUpdate:modelValue":t[4]||(t[4]=t=>e.pkmName=t),"use-input":"","input-debounce":"0",label:"Pokemon名稱",options:e.pkmNames,onFilter:e.filterFn},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(O,null,{default:(0,a.w5)((()=>[(0,a.Wm)(K,{class:"text-grey"},{default:(0,a.w5)((()=>[(0,a.Uk)(" No results ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,a._)("div",x,[(0,a.Wm)(N,{modelValue:e.type,"onUpdate:modelValue":t[5]||(t[5]=t=>e.type=t),options:e.types,label:"太晶屬性"},null,8,["modelValue","options"])]),(0,a._)("div",T,[(0,a.Wm)(N,{modelValue:e.star,"onUpdate:modelValue":t[6]||(t[6]=t=>e.star=t),options:e.stars,label:"星數"},null,8,["modelValue","options"])]),(0,a._)("div",q,[(0,a.Wm)(R,{modelValue:e.password,"onUpdate:modelValue":t[7]||(t[7]=t=>e.password=t),label:"密語"},null,8,["modelValue"])]),(0,a._)("div",V,[(0,a.Wm)(R,{modelValue:e.comment,"onUpdate:modelValue":t[8]||(t[8]=t=>e.comment=t),label:"備註"},null,8,["modelValue"])]),(0,a._)("div",W,[(0,a.Wm)(z,{color:"primary",onClick:t[9]||(t[9]=t=>e.submit()),label:"提交"})])])])),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1})}var S=l(499),C=l(1809),P=l(6950),Q=function(e,t,l,a){function o(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{m(a.next(e))}catch(t){s(t)}}function i(e){try{m(a["throw"](e))}catch(t){s(t)}}function m(e){e.done?l(e.value):o(e.value).then(n,i)}m((a=a.apply(e,t||[])).next())}))};const B=(0,C.Q_)("pokemonStore",{state:()=>({pokedex:[],raidBattles:[]}),getters:{pokemonNames(){const e=this.pokedex.map((e=>e.Name));return e}},actions:{getPokedex(){return Q(this,void 0,void 0,(function*(){P.Z.show();const e=yield fetch("https://pokemonsv.azurewebsites.net/api/GetPokedex"),t=yield e.json();this.pokedex=t,P.Z.hide()}))},getRaidBattles(){return Q(this,void 0,void 0,(function*(){P.Z.show();const e=yield fetch("https://pokemonsv.azurewebsites.net/api/GetRaidBattles"),t=yield e.json();t.forEach((e=>{e.Timestamp=new Date(e.Timestamp).toLocaleString()})),t.sort(((e,t)=>e.Timestamp>t.Timestamp?-1:e.Timestamp<t.Timestamp?1:0)),this.raidBattles=t,P.Z.hide()}))},createRaidBattle(e){return Q(this,void 0,void 0,(function*(){P.Z.show();const t=new Headers;t.append("Content-Type","application/json");const l=JSON.stringify({pokemonName:e.PartitionKey,pokemonType:e.Type,stars:e.Stars,password:e.Password,comment:e.Comment}),a={method:"POST",headers:t,body:l},o=yield fetch("https://pokemonsv.azurewebsites.net/api/CreateRaidBattle",a);return console.log(o),P.Z.hide(),o}))},getFilteredRaidBattles(e,t){return Q(this,void 0,void 0,(function*(){P.Z.show(),yield this.getRaidBattles(),this.raidBattles=this.raidBattles.filter((l=>"不限"===e&&0===t||("不限"===e?l.Stars===t:0===t?l.Type===e:l.Type===e&&l.Stars===t))),P.Z.hide()}))}}}),N=[{name:"name",label:"名稱",field:"Name",align:"left",sortable:!0},{name:"number",label:"編號",field:"RowKey",align:"left",sortable:!0},{name:"type1",label:"屬性1",field:"Type1",align:"left",sortable:!0},{name:"type2",label:"屬性2",field:"Type2",align:"left",sortable:!0}],z=[{name:"name",label:"名稱",field:"PartitionKey",align:"left",sortable:!0},{name:"star",label:"星",field:"Stars",align:"left",sortable:!0},{name:"type",label:"太晶屬性",field:"Type",align:"left",sortable:!0},{name:"time",label:"時間",field:"Timestamp",align:"left",sortable:!0},{name:"passowrd",label:"密語",field:"Password",align:"left",sortable:!0}],H=(0,a.aZ)({name:"IndexPage",setup(){const e=B();e.getPokedex(),e.getRaidBattles();const t=(0,S.iH)(e.pokemonNames),l=(0,S.iH)(""),a=(0,S.iH)("");let o=(0,S.iH)(""),s=(0,S.iH)(0),n=(0,S.iH)(""),i=(0,S.iH)(""),m=(0,S.iH)("不限"),r=(0,S.iH)(0),d=(0,S.iH)("");const u=e=>{a.value=e.row.Name};return{tab:(0,S.iH)("join"),type:o,types:["不限","一般","火","水","電","草","冰","格鬥","毒","地面","飛行","超能力","超能力","岩石","蟲","幽靈","龍","惡","鋼","妖精"],stars:[0,1,2,3,4,5,6],star:s,password:n,pkmName:a,filter:l,pokdexColumns:N,raidBattleColums:z,selectPkm:u,pkmNames:t,pkm:e,searchName:i,searchType:m,searchStar:r,comment:d,filterFn(l,a){a(""!==l?()=>{const a=l.toLowerCase();t.value=e.pokemonNames.filter((e=>e.toLowerCase().indexOf(a)>-1))}:()=>{t.value=e.pokemonNames})},submit(){const t={PartitionKey:a.value,RowKey:a.value,Type:o.value,Stars:s.value,Password:n.value,Comment:d.value,Timestamp:(new Date).toISOString()};e.createRaidBattle(t),a.value="",o.value="",s.value=0,n.value="",d.value=""},search(){e.getFilteredRaidBattles(m.value,r.value)},reset(){e.getRaidBattles(),i.value="",m.value="",r.value=0}}}});var R=l(1639),j=l(9885),U=l(4458),F=l(7817),I=l(900),K=l(926),O=l(9800),L=l(4106),D=l(7076),G=l(9379),E=l(2374),J=l(6611),A=l(2857),M=l(3190),X=l(490),Y=l(1233),$=l(3532),ee=l(1682),te=l(7220),le=l(9984),ae=l.n(le);const oe=(0,R.Z)(H,[["render",Z]]),se=oe;ae()(H,"components",{QPage:j.Z,QCard:U.Z,QTabs:F.Z,QTab:I.Z,QSeparator:K.Z,QTabPanels:O.Z,QTabPanel:L.Z,QSelect:D.Z,QBtn:G.Z,QTable:E.Z,QInput:J.Z,QIcon:A.Z,QCardSection:M.Z,QItem:X.Z,QItemSection:Y.Z,QTr:$.Z,QTh:ee.Z,QTd:te.Z})}}]);